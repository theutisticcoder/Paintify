<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realistic Oil Painting</title>
    <style>
        body { text-align: center; background: #222; color: white; }
        canvas { background: white; cursor: crosshair; display: block; margin: auto; }
        #controls { margin-bottom: 10px; }
        input[type="color"] { width: 50px; height: 30px; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <div id="controls">
        <label for="colorPicker">ðŸŽ¨ Pick Color:</label>
        <input type="color" id="colorPicker" value="#aa7733">
    </div>
    <canvas id="canvas"></canvas>

    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        const colorPicker = document.getElementById("colorPicker");

        // Resize canvas
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let painting = false;
        let lastX, lastY;
        let brushColor = colorPicker.value;

        // Load brush texture
        const brush = new Image();
        brush.src = "oil.png"; // Replace with a better texture if needed

        // Update color when user picks a new one
        colorPicker.addEventListener("input", (e) => {
            brushColor = e.target.value;
        });

        function paintStroke(x, y, color) {
            ctx.globalAlpha = 0.9;
            ctx.globalCompositeOperation = "source-over";
            ctx.fillStyle = color;

            // Paint using brush texture
            ctx.drawImage(brush, x - 10, y - 10, 30, 30);
        }

        function smudge(x, y) {
            ctx.globalCompositeOperation = "lighter";
            let imgData = ctx.getImageData(x - 10, y - 10, 20, 20);
            let pixels = imgData.data;

            for (let i = 0; i < pixels.length; i += 4) {
                let r = pixels[i], g = pixels[i+1], b = pixels[i+2];
                let avg = (r + g + b) / 3;
                pixels[i] = avg;
                pixels[i+1] = avg;
                pixels[i+2] = avg;
            }

            ctx.putImageData(imgData, x - 10, y - 10);
        }

        function startPainting(e) {
            painting = true;
            lastX = e.offsetX;
            lastY = e.offsetY;
        }

        function stopPainting() {
            painting = false;
        }

        function draw(e) {
            if (!painting) return;

            paintStroke(e.offsetX, e.offsetY, brushColor);
            smudge(e.offsetX, e.offsetY);

            lastX = e.offsetX;
            lastY = e.offsetY;
        }

        canvas.addEventListener("mousedown", startPainting);
        canvas.addEventListener("mouseup", stopPainting);
        canvas.addEventListener("mousemove", draw);
    </script>
</body>
</html>
