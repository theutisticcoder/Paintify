<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realistic Oil Painting</title>
    <style>
        body { text-align: center; background: #222; color: white; }
        canvas { background: white; cursor: crosshair; display: block; margin: auto; }
        #controls { margin-bottom: 10px; }
        input[type="color"] { width: 50px; height: 30px; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <div id="controls">
        <label for="colorPicker">ðŸŽ¨ Pick Color:</label>
        <input type="color" id="colorPicker" value="#aa7733">
    </div>
    <canvas id="canvas"></canvas>

    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        const colorPicker = document.getElementById("colorPicker");

        // Resize canvas
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let painting = false;
        let lastX, lastY;
        let brushColor = colorPicker.value;

        // Load brush texture
        const brush = new Image();
        brush.src = "oil.png"; // Replace with a better texture if needed

        // Create an off-screen canvas for recoloring
        const brushCanvas = document.createElement("canvas");
        const brushCtx = brushCanvas.getContext("2d");

        brush.onload = function () {
            brushCanvas.width = brush.width;
            brushCanvas.height = brush.height;
            updateBrushColor();
        };

        // Update color when user picks a new one
        colorPicker.addEventListener("input", (e) => {
            brushColor = e.target.value;
            updateBrushColor();
        });

        function updateBrushColor() {
            brushCtx.clearRect(0, 0, brushCanvas.width, brushCanvas.height);
            brushCtx.drawImage(brush, 0, 0); // Draw the original brush

            let imgData = brushCtx.getImageData(0, 0, brushCanvas.width, brushCanvas.height);
            let pixels = imgData.data;

            for (let i = 0; i < pixels.length; i += 4) {
                if (pixels[i + 3] > 0) { // Only color non-transparent pixels
                    pixels[i] = parseInt(brushColor.slice(1, 3), 16); // R
                    pixels[i + 1] = parseInt(brushColor.slice(3, 5), 16); // G
                    pixels[i + 2] = parseInt(brushColor.slice(5, 7), 16); // B
                }
            }

            brushCtx.putImageData(imgData, 0, 0);
        }

        function paintStroke(x, y) {
            ctx.globalAlpha = 0.9;
            ctx.globalCompositeOperation = "source-over";
            ctx.drawImage(brushCanvas, x - 10, y - 10, 30, 30);
        }

        function startPainting(e) {
            painting = true;
            lastX = e.offsetX;
            lastY = e.offsetY;
        }

        function stopPainting() {
            painting = false;
        }

        function draw(e) {
            if (!painting) return;
            paintStroke(e.offsetX, e.offsetY);
        }

        canvas.addEventListener("mousedown", startPainting);
        canvas.addEventListener("mouseup", stopPainting);
        canvas.addEventListener("mousemove", draw);
    </script>
</body>
</html>
